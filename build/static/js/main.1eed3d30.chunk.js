(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{141:function(e,t,a){e.exports=a.p+"static/media/def_house_img.7daa589f.jpg"},151:function(e,t,a){e.exports={technologyBox:"PoweredBy_technologyBox__1SpIA"}},152:function(e,t,a){e.exports={TechCardClass:"TechCard_TechCardClass__3sff_"}},179:function(e,t,a){e.exports=a(368)},185:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){"use strict";a.r(t);a(180);var r=a(1),n=a.n(r),c=a(59),o=a.n(c),i=a(19),l=a(47),s=a(153),u=function(e){return{type:"GET_CITY_WEATHER",payload:e}},m=function(){return{type:"WAIT_LOADING"}},d=function(){return{type:"RESPONSE_RECEIVED"}},p=(a(185),a(10)),f=a.n(p),h=a(35),y=a(141),g=a.n(y),v=function(e){return new Date(1e3*e).toLocaleString("en-GB").split(",")[0].replace(/\//g,"-")},E=function(e){return e=(e=e.replace("&w=400","&w=300&h=200")).replace("&fit=max","&fit=crop")},b=function(e){var t=new Date(1e3*e),a=t.getHours(),r="0"+t.getMinutes(),n="0"+t.getSeconds();return a+":"+r.substr(-2)+":"+n.substr(-2)},w=function(e){var t=e.dt,a=e.sunrise,r=e.sunset;return a<t&&t<r},C=function(e){var t=e.map((function(e){return{date:v(e.dt),avr:(t=e.temp,Math.round((t.morn+t.day+t.eve+t.night)/4))};var t}));return t.shift(),t},_=function(e){for(var t in e)e[t].Hour=e[t].Hour.split(":")[0]},x=function(e,t,a){switch(e){case"Thunderstorm":return window.Skycons.WIND;case"Drizzle":return window.Skycons.RAIN;case"Rain":return window.Skycons.SLEET;case"Snow":return window.Skycons.SNOW;case"Clear":return a?window.Skycons.CLEAR_DAY:window.Skycons.CLEAR_NIGHT;case"Clouds":if(801===t||802===t)return a?window.Skycons.PARTLY_CLOUDY_DAY:window.Skycons.PARTLY_CLOUDY_NIGHT;if(803===t||804===t)return window.Skycons.CLOUDY;break;default:if(t>=700)return window.Skycons.FOG;throw new Error("Not relevant current weather, caught in pickProperSVG function ")}},k=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},O=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.opencagedata.com/geocode/v1/json?key=".concat("2554eb196ece4fea83c4ccc5875aa8e8","&q=").concat(t,"&no_annotations=1&limit=1"));case 2:return a=e.sent,e.next=5,a.json();case 5:if(a=e.sent,r=a.results[0].components._category,n=a.results[0].components._type,"place"===r&&"city"===n){e.next=10;break}throw new Error("OpenCage Geocoding API cannot find such city!");case 10:return e.abrupt("return",{lat:a.results[0].geometry.lat,lng:a.results[0].geometry.lng});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={getWeatherData:function(){var e=Object(h.a)(f.a.mark((function e(t){var a,r,n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t.lat,"&lon=").concat(t.lng,"&exclude=minutely&appid=").concat("ccec765bf7b5d7e644d77172a0eadb7c","&units=metric"));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Problem with Open Weather API");case 5:return e.next=7,a.json();case 7:a=e.sent,r=[],e.t0=f.a.keys(a.hourly);case 10:if((e.t1=e.t0()).done){e.next=18;break}if(n=e.t1.value,c=b(a.hourly[n].dt),r.push({Hour:c,Temperature:a.hourly[n].temp}),"0:00:00"!==c){e.next=16;break}return e.abrupt("break",18);case 16:e.next=10;break;case 18:return _(r),console.log("TONKA"),console.log(a),console.log(JSON.stringify(a)),console.log(r),console.log(JSON.stringify(r)),e.abrupt("return",[a,r]);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCityCoordinates:O,getCityImage:function(){var e=Object(h.a)(f.a.mark((function e(t){var a,r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.unsplash.com/search/photos?client_id=".concat("Cs5VM9ECaEgKddglzuvOxLIDx5rL86aanVD9VhtDY-4","&page=1&per_page=3&query=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return a=e.sent,r="",n="",0===a.total?(r=g.a,n="Unfortunately Unsplash API does not provide images for that town."):(r=E(a.results[2].urls.small),n=a.results[2].alt_description),e.abrupt("return",[r,n]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=a(44),A=a.n(j),S=function(e){var t=e.onAddForecast,a=e.onRequestSend,c=e.onResponseReceived,o=n.a.useContext(re),l=Object(r.useState)(null),s=Object(i.a)(l,2),u=s[0],m=s[1],d=Object(r.useState)(null),p=Object(i.a)(d,2),y=p[0],g=p[1],v=Object(r.useState)(!0),E=Object(i.a)(v,2),b=E[0],_=E[1],x=function(e){var t=o;t.length>0&&t.forEach((function(t){if(t.place.city===e)throw new Error("You already have data for that city! (Client input error)")}))},k=function(){var e=Object(h.a)(f.a.mark((function e(r){var n,o,l,s,u,d,p,h,y,v,E;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.preventDefault(),n=(n=(n=r.target.city.value).trim())[0].toUpperCase()+n.substring(1),x(n),_(!0),r.target.city.value="",m(""),e.prev=9,e.next=12,N.getCityCoordinates(n);case 12:return d=e.sent,e.next=15,N.getWeatherData(d);case 15:return p=e.sent,h=Object(i.a)(p,2),o=h[0],l=h[1],e.next=21,N.getCityImage(n);case 21:y=e.sent,v=Object(i.a)(y,2),s=v[0],u=v[1],e.next=30;break;case 27:e.prev=27,e.t0=e.catch(9),console.error(e.t0);case 30:a(),g(A.a.SunAnimation),setTimeout((function(){g("")}),2500),E={place:{city:n,lat:d.lat,lng:d.lng},image:{img_url:s,alt:u},current:{temp:o.current.temp,sky:o.current.weather[0].main,skyID:o.current.weather[0].id,desc:o.current.weather[0].description,dayLight:w(o.current)},daily:{tempHourArr:l},forecast:C(o.daily)},t(E),c(),e.next=41;break;case 37:e.prev=37,e.t1=e.catch(0),m(e.t1.message),console.error(e.t1.name+" caught! \n"+e.t1);case 41:case"end":return e.stop()}}),e,null,[[0,37],[9,27]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:A.a.Bar},n.a.createElement("h1",null,"Clima"),n.a.createElement("div",{className:"".concat(A.a.Sun," ").concat(y)},n.a.createElement("img",{src:"imgs/sun/stylized-sun-bg.png",alt:"sun"})),n.a.createElement("form",{className:A.a.Form,onSubmit:k,"data-test":"bar-form"},n.a.createElement("input",{type:"text","data-test":"city-input",spellCheck:"false",name:"city",placeholder:"City",onChange:function(e){e.target.value?_(!1):_(!0)}}),n.a.createElement("span",{className:"helper-text left-align red-text","data-test":"helper-span"},u),n.a.createElement("button",{className:"waves-effect   btn teal lighten-2",disabled:b,"data-test":"submit-button",type:"submit"},"Get forecast")))},P=a(42),D=a.n(P),L=a(28),B=a(29),T=a(34),I=a(33),R=a(8),W=a(9),H=a.n(W),M=function(e){Object(T.a)(a,e);var t=Object(I.a)(a);function a(){return Object(L.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){var e=this.props,t=e.x,a=e.y,r=e.payload;return n.a.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},n.a.createElement("text",{x:0,y:0,dy:16,fill:"#666",transform:"rotate(24)"},r.value))}}]),a}(r.Component),G=function(e){var t=Object(r.useContext)(re);return n.a.createElement("div",{className:H.a.ChartContainer+" "+H.a.BarChartContainer},n.a.createElement("h6",null,"7-days forecast"),n.a.createElement(R.f,null,n.a.createElement(R.b,{data:function(e){var a=t;for(var r in a)if(a[r].place.city===e)return a[r].forecast;throw new Error("extractDataFromStore could not find relative data!")}(e.city),margin:{top:10,right:10,left:10,bottom:10}},n.a.createElement(R.c,{strokeDasharray:"3 3"}),n.a.createElement(R.h,{dataKey:"date",height:60,tick:n.a.createElement(M,null),interval:0}),n.a.createElement(R.i,{type:"number",domain:["dataMin - 2","auto"],minTickGap:3,label:{value:"Average temperature \u2103",position:"insideLeft",angle:-90,dy:60}}),n.a.createElement(R.g,{labelFormatter:function(e){return null},formatter:function(e,t,a){return["".concat(a.payload.avr,"\u2103"),"Average temperature on ".concat(a.payload.date)]},separator:" is "}),n.a.createElement(R.a,{dataKey:"avr",fill:"#4DB6AC"}))))},U=function(e){var t=Object(r.useContext)(re);return n.a.createElement("div",{className:H.a.ChartContainer+" "+H.a.LineChartContainer},n.a.createElement("h6",null,"Daily temperature"),n.a.createElement(R.f,null,n.a.createElement(R.e,{data:function(e){var a=t;for(var r in a)if(a[r].place.city===e)return a[r].daily.tempHourArr;throw new Error("extractDataFromStore could not find relative data!")}(e.city),margin:{top:10,right:10,left:10,bottom:10}},n.a.createElement(R.c,{strokeDasharray:"3 3"}),n.a.createElement(R.h,{dataKey:"Hour",label:{value:"Time in hours",position:"insideRight",dy:20}}),n.a.createElement(R.i,{type:"number",domain:["auto","auto"],allowDecimals:!1,label:{value:"Temperature \u2103",position:"insideLeft",angle:-90,dy:40}}),n.a.createElement(R.g,{labelFormatter:function(e){return""},formatter:function(e,t,a){return["".concat(Math.round(e),"\u2103"),"Temperature at ".concat(a.payload.Hour," o'clock")]},separator:" is "}),n.a.createElement(R.d,{type:"monotone",dataKey:"Temperature",stroke:"#4DB6AC",activeDot:{r:8}}))))},Y=function(e){var t=n.a.createRef();return Object(r.useEffect)((function(){var a=document.querySelectorAll(".modal");D.a.Modal.init(a,{}),function(){var a=new window.Skycons({color:"rgb(77, 182, 172)"});a.add(t.current,x(e.sky,e.skyID,e.dayLight)),a.play()}()})),n.a.createElement("div",{className:H.a.CityCard},n.a.createElement("div",{className:"col s12 m4"},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-image "+H.a.UpperPart},n.a.createElement("img",{src:e.img_url,alt:e.img_alt,width:"300",height:"200"}),n.a.createElement("span",{className:"card-title "},e.city),n.a.createElement("a",{className:"btn-floating  halfway-fab waves-effect  teal lighten-2 modal-trigger",href:"#"+e.city+"Modal"},n.a.createElement("i",{className:"material-icons"},"add"))),n.a.createElement("div",{className:"card-content "+H.a.Content},n.a.createElement("div",null,n.a.createElement("canvas",{ref:t,width:"300",height:"300"})),n.a.createElement("div",{className:H.a.Temp},Math.round(e.temp)+"\xb0"),n.a.createElement("div",{className:H.a.Desc},k(e.desc))))),n.a.createElement("div",{id:e.city+"Modal",className:"modal modal-fixed-footer "+H.a.Modal},n.a.createElement("div",{className:"modal-content"},n.a.createElement("h4",null,e.city),n.a.createElement(U,{city:e.city}),n.a.createElement(G,{city:e.city})),n.a.createElement("div",{className:"modal-footer"},n.a.createElement("a",{href:"#!",className:"modal-close waves-effect waves-green btn-flat"},"OK"))))},z=a(64),F=a.n(z),K=function(e){var t,a=e.isLoading,c=Object(r.useContext)(re),o=n.a.createElement("div",{className:F.a.CenterChild},n.a.createElement("div",{className:"preloader-wrapper big active "},n.a.createElement("div",{className:"spinner-layer spinner-blue-only"},n.a.createElement("div",{className:"circle-clipper left"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"gap-patch"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"circle-clipper right"},n.a.createElement("div",{className:"circle"})))));return t=0===c.length?n.a.createElement("div",{className:F.a.CenterChild},n.a.createElement("div",null,n.a.createElement("span",null,"Please enter city."))):c.map((function(e){return n.a.createElement(Y,{key:e.place.city,city:e.place.city,sky:e.current.sky,skyID:e.current.skyID,desc:e.current.desc,dayLight:e.current.dayLight,temp:e.current.temp,img_url:e.image.img_url,img_alt:e.image.alt,tempHourArr:e.daily.tempHourArr})})),n.a.createElement("div",{className:F.a.Content},n.a.createElement("div",{className:"row"},a?o:t))},q=a(91),J=a.n(q),V=function(e){Object(T.a)(a,e);var t=Object(I.a)(a);function a(){return Object(L.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("DOMContentLoaded",(function(e){var t=document.querySelectorAll(".parallax");D.a.Parallax.init(t,{})}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"parallax-container "+J.a.fullWidth+" "+J.a.myParallax},n.a.createElement("div",{className:"parallax"},n.a.createElement("img",{src:"imgs/ParallaxEffect/parallax-effect-1.jpg",alt:"Just cool parallax effect"})))}}]),a}(r.Component),Z=a(151),Q=a.n(Z),X=a(152),$=a.n(X),ee=function(e){var t=e.href,a=e.src,r=e.alt;return n.a.createElement("a",{href:t,target:"_blank",rel:"noopener",className:"col s12 m3 "+$.a.TechCardClass},n.a.createElement("img",{src:a,alt:r,title:r}))},te=[{alt:"React Official Website",src:"imgs/PoweredBy/react-logo.png",href:"https://reactjs.org/"},{alt:"Redux Official Website",src:"imgs/PoweredBy/redux-logo.png",href:"https://redux.js.org/"},{alt:"Jest testing library official website",src:"imgs/PoweredBy/jest-logo.png",href:"https://jestjs.io/"},{alt:"Enzyme testing library official website",src:"imgs/PoweredBy/enzyme-logo.png",href:"https://enzymejs.github.io/enzyme/"},{alt:"Materialize-css Official Website",src:"imgs/PoweredBy/materialize-logo.png",href:"https://materializecss.com/"},{alt:"WebdriverIO testing library official website",src:"imgs/PoweredBy/webdriverio-logo.png",href:"https://webdriver.io/"},{alt:"Nivo visual library official website",src:"imgs/PoweredBy/nivo-logo.png",href:"https://nivo.rocks/"},{alt:"Green Sock GSAP animation library official website",src:"imgs/PoweredBy/gsap-logo.png",href:"https://greensock.com/gsap/"}],ae=function(e){Object(T.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(L.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={data:te},e}return Object(B.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:Q.a.technologyBox},n.a.createElement("div",{className:"row "},this.state.data.map((function(e,t){return n.a.createElement(ee,{"data-test":"tech-card-component",href:e.href,src:e.src,alt:e.alt,key:t})}))))}}]),a}(r.Component),re=n.a.createContext([]),ne=function(e,t){switch(t.type){case"GET_CITY_WEATHER":var a=t.payload,r={isLoading:e.isLoading,weatherArr:[].concat(Object(s.a)(e.weatherArr),[a])};return console.log("Reducer newState"),console.log(r),r;case"WAIT_LOADING":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0});case"RESPONSE_RECEIVED":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1});default:throw new Error("Invalid action type ".concat(t.type))}};var ce=function(){var e=n.a.useReducer(ne,{isLoading:!1,weatherArr:[]}),t=Object(i.a)(e,2),a=t[0],r=t[1];return n.a.useEffect((function(){})),n.a.createElement("div",{className:"App container"},n.a.createElement(re.Provider,{value:a.weatherArr},n.a.createElement(S,{onResponseReceived:function(){return r(d())},onRequestSend:function(){return r(m())},onAddForecast:function(e){return r(u(e))}}),n.a.createElement(K,{isLoading:a.isLoading})),n.a.createElement(V,null),n.a.createElement(ae,null))};a(367),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},44:function(e,t,a){e.exports={Bar:"Bar_Bar__1bYaA",Form:"Bar_Form__1eHd9",Sun:"Bar_Sun__2JkO-",SunAnimation:"Bar_SunAnimation__3pB6w",rotate360:"Bar_rotate360__1GUqU"}},64:function(e,t,a){e.exports={Content:"Content_Content__1IAlg",CenterChild:"Content_CenterChild__chKlK"}},9:function(e,t,a){e.exports={CityCard:"CityPanel_CityCard__1H25u",UpperPart:"CityPanel_UpperPart__3LRQ3",Content:"CityPanel_Content__4bsWl",Temp:"CityPanel_Temp__1MBHg",Desc:"CityPanel_Desc__3duyA",Modal:"CityPanel_Modal__qOUjo",ChartContainer:"CityPanel_ChartContainer__1pRrb",LineChartContainer:"CityPanel_LineChartContainer__1jeZc",BarChartContainer:"CityPanel_BarChartContainer__3hg_Z"}},91:function(e,t,a){e.exports={myParallax:"ParallaxEffect_myParallax__3_JLV",fullWidth:"ParallaxEffect_fullWidth__sXmju"}}},[[179,1,2]]]);
//# sourceMappingURL=main.1eed3d30.chunk.js.map